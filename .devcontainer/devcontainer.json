// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
{
    "name": "Existing Dockerfile",
    // "build": {
    //     "context": "..",
    //     "dockerfile": "../Dockerfile",
    // if you have a development stage in a multi-stage Dockerfile
    // "target": "development",
    // },
    // using docker-compose: https://containers.dev/implementors/json_reference/#compose-specific
    "dockerComposeFile": [
        "../docker-compose.yml",
        "./docker-compose.extend.yml"
    ],
    // name of the service that devcontainer should connect to once running
    "service": "webapp",
    "workspaceFolder": "/app",
    "postCreateCommand": "pre-commit install",
    // "runArgs": [
    //     "--network=host",
    //     ""
    // ],
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
    },
    // Configure tool-specific properties.
    "customizations": {
        // Configure properties specific to VS Code.
        "vscode": {
            // Set *default* container specific settings.json values on container create.
            "settings": {
                "editor.formatOnSave": true,
                "editor.formatOnPaste": false,
                "notebook.formatOnSave.enabled": true,
                "[python]": {
                    "editor.defaultFormatter": "ms-python.black-formatter"
                },
                "black-formatter.args": [
                    "--line-length",
                    "88"
                ],
                "python.terminal.activateEnvInCurrentTerminal": true,
                "python.terminal.activateEnvironment": true,
                "pythonTestExplorer.testFramework": "pytest"
            },
            // Add the IDs of extensions you want installed when the container is created.
            "extensions": [
                "charliermarsh.ruff",
                "christian-kohler.path-intellisense",
                "dotenv.dotenv-vscode",
                "github.copilot",
                "GitHub.copilot-chat",
                "ms-python.python",
                "ms-python.isort",
                "ms-python.mypy-type-checker",
                "ms-python.black-formatter",
                "ms-python.debugpy",
                "ms-toolsai.jupyter",
                "ms-toolsai.jupyter-keymap",
                "ms-toolsai.jupyter-renderers",
                "ms-toolsai.vscode-jupyter-cell-tags",
                "redhat.vscode-yaml",
                "streetsidesoftware.code-spell-checker",
                "tamasfe.even-better-toml",
                "VisualStudioExptTeam.vscodeintellicode",
            ]
        }
    },
    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [],
    // Configure tool-specific properties.
    // "customizations": {},
    // Uncomment to connect as an existing user other than the container default. More info: https://aka.ms/dev-containers-non-root.
    // "remoteUser": "devcontainer"
}
