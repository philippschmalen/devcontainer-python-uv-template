{
    // For format details, see https://aka.ms/devcontainer.json.
    // For config options, see the README at:
    // https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
    "name": "Existing Dockerfile",
    // "build": {
    //     "context": "..",
    //     "dockerfile": "../Dockerfile",
    //     // if you have a development stage in a multi-stage Dockerfile
    //     "target": "production",
    // },
    // using docker-compose: https://containers.dev/implementors/json_reference/#compose-specific
    "dockerComposeFile": [
        "../docker-compose.yml",
        "./docker-compose.extend.yml"
    ],
    // // name of the service that devcontainer should connect to once running
    "service": "app",
    "workspaceFolder": "/app",
    // git repos reported as unsafe if not added as a safe directory
    "postCreateCommand": "pre-commit install && git config --global --add safe.directory ${containerWorkspaceFolder}",
    // "runArgs": [
    //     "--network=host",
    // ],
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
    },
    // Configure tool-specific properties.
    "customizations": {
        // Configure properties specific to VS Code.
        "vscode": {
            // Set *default* container specific settings.json values on container create.
            "settings": {
                "editor.tabSize": 4,
                "editor.autoIndent": "advanced",
                "editor.formatOnPaste": true,
                "editor.formatOnSave": true,
                "[python]": {
                    "editor.codeActionsOnSave": {
                        "source.fixAll": "always",
                        "source.organizeImports": "always"
                    },
                    "editor.defaultFormatter": "charliermarsh.ruff"
                },
                "github.copilot.nextEditSuggestions.enabled": true,
                "jupyter.notebookFileRoot": "${workspaceFolder}",
                "notebook.formatOnSave.enabled": true,
                "notebook.codeActionsOnSave": {
                    "notebook.source.fixAll": "explicit",
                    "notebook.source.organizeImports": "explicit"
                },
                "python.terminal.activateEnvInCurrentTerminal": true,
                "python.terminal.activateEnvironment": true,
                "pythonTestExplorer.testFramework": "pytest",
                "python.analysis.extraPaths": [
                    "${workspaceFolder}"
                ],
                "ruff.enable": true,
                "ruff.lint.enable": true,
                // ensures extensions are installed
                // see https://github.com/microsoft/vscode-remote-release/issues/9494#issuecomment-2039652897
                "extensions.verifySignature": false
            },
            // Add the IDs of extensions you want installed when the container is created.
            "extensions": [
                "charliermarsh.ruff",
                "christian-kohler.path-intellisense",
                "dotenv.dotenv-vscode",
                "Equinusocio.vsc-material-theme",
                "github.copilot",
                "GitHub.copilot-chat",
                "GitHub.vscode-pull-request-github",
                "johnpapa.vscode-peacock",
                "ms-azuretools.vscode-docker",
                "ms-python.python",
                "ms-python.mypy-type-checker",
                "ms-python.debugpy",
                "ms-toolsai.jupyter",
                "ms-toolsai.jupyter-keymap",
                "ms-toolsai.jupyter-renderers",
                "ms-toolsai.vscode-jupyter-cell-tags",
                "Postman.postman-for-vscode",
                "qwtel.sqlite-viewer",
                "redhat.vscode-yaml",
                "streetsidesoftware.code-spell-checker",
                "tamasfe.even-better-toml",
                "VisualStudioExptTeam.vscodeintellicode",
            ]
        }
    }
    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [],
    // Configure tool-specific properties.
    // "customizations": {},
    // Uncomment to connect as an existing user other than the container default. More info: https://aka.ms/dev-containers-non-root.
    // "remoteUser": "devcontainer"
}
